// DragonSea MC Website Localization
// Last Updated: 2026 by LeoD.Aviation

const translations = {
    en: {
        "page-title": "DragonSea Minecraft",
        "title": "DragonSea Minecraft",
        "subtitle": "Build. Explore. Create.",
        "join-title": "Get Started",
        "join-desc": "Ready to dive in? Grab the address and join the server!",
        "join-btn": "Join Server",
        "copy-hint": "Click to copy link",
        "nav-home": "Home",
        "nav-about": "About Us",
        "dynmap-title": "Live Dynamic Map",
        "dynmap-desc": "Keep track of the entire explored world and player locations in real-time.",
        "dynmap-btn": "Open Dynmap",
        "transit-title": "Transit Network Map",
        "transit-desc": "Plan your route and view our progress across our rail transport systems.",
        "transit-btn": "Transit Guide",
        "status-title": "Server Live Feed",
        //"status-desc": "Current status and how many players are online right now.",
        "status-online": "Status:",
        "status-players": "Online:",
        "status-latency": "Ping:",
        "online-players": "Who's Online",
        "about-title": "The DragonSea Story",
        "about-subtitle": "Seeking a modern and friendly city experience in Minecraft ðŸ‘¬ :)",
        "about-desc": "DragonSea MC is a Forge-based city-building community. We're currently in active development, working to build a fully fictional nation and city. Whether you're an architect or an explorer, there's a place for you here.",
        "feature-creative": "Open and Free Creation",
        "feature-creative-desc": "After approval by our administrators, you are free to use your architectural talent to the full extent. Here, there are no limits to architecture, only the boundaries of imagination!",
        "feature-community": "Active Community",
        "feature-community-desc": "Our current team is also made of players who love architecture and rail transit. We hope you can join us to create a warm and creative city together!",
        "feature-events": "Exciting Events",
        "feature-events-desc": "We will hold architecture/rail transit competitions and various community events based on voting and online users on our server.",
        "roadmap-title": "Development Progress Chart",
        "roadmap-1-title": "Initial Concept",
        "roadmap-1-desc": "Jan 8, 2025 - Initial server concept",
        "roadmap-2-title": "Server Launch",
        "roadmap-2-desc": "Jan 10, 2025 - Launched as Aetheria (Forge 1.19.4). Metro Line 1 construction began.",
        "roadmap-3-title": "Mods & Airport Express",
        "roadmap-3-desc": "Jan 12, 2025 - Added building/transit mods. Started Airport Express.",
        "roadmap-4-title": "Arclight Migration",
        "roadmap-4-desc": "Jan 13, 2025 - Switched to Arclight. Added plugins and many metro stations.",
        "roadmap-5-title": "Metro Line 2",
        "roadmap-5-desc": "Jan 17, 2025 - Construction of Metro Line 2 started.",
        "roadmap-6-title": "Rebranding",
        "roadmap-6-desc": "Jan 22, 2025 - Renamed to DragonSea MC.",
        "team-title": "The Crew",
        "team-1-desc": "Server Owner & Developer",
        "team-2-desc": "Lead Administrator",
        "team-3-name": "Community Manager",
        "team-3-desc": "Event Coordinator",
        "footer": "Â© 2026 LeoD.Aviation. Built for the community."
    },
    zh: {
        "page-title": "é¾™æµ· Minecraft",
        "title": "é¾™æµ· DragonSea Minecraft",
        "subtitle": "å»ºé€  Â· æŽ¢ç´¢ Â· åˆ›é€ ",
        "join-title": "åŠ å…¥æˆ‘ä»¬",
        "join-desc": "ä»¥ä¸‹æ˜¯æœåŠ¡å™¨çš„é“¾æŽ¥ï¼Œè¯·å¤åˆ¶è¿›Minecraftï¼Œå¼€å¯æ‚¨çš„å»ºç­‘ä¹‹æ—…å§ï¼",
        "join-btn": "ç«‹å³è¿›å…¥",
        "copy-hint": "ç‚¹å‡»å¤åˆ¶æœåŠ¡å™¨ IP",
        "nav-home": "é¦–é¡µ",
        "nav-about": "å…³äºŽæˆ‘ä»¬",
        "dynmap-title": "å«æ˜ŸåŠ¨æ€åœ°å›¾",
        "dynmap-desc": "å®žæ—¶æŸ¥çœ‹ä¸–ç•Œå…¨æ™¯åœ°å›¾ï¼Œè¿½è¸ªçŽ©å®¶ä½ç½®ã€‚",
        "dynmap-btn": "æ‰“å¼€åœ°å›¾",
        "transit-title": "äº¤é€šçº¿ç½‘å›¾",
        "transit-desc": "è§„åˆ’æ‚¨çš„è¡Œç¨‹ï¼ŒæŸ¥çœ‹æˆ‘ä»¬ç›®å‰å»ºè®¾çš„è½¨é“äº¤é€šç½‘ç»œï¼",
        "transit-btn": "äº¤é€šæŒ‡å—",
        "status-title": "æœåŠ¡å™¨å®žæ—¶çŠ¶æ€",
        //"status-desc": "å½“å‰çŠ¶æ€æ¯5ç§’æ›´æ–°ä¸€æ¬¡ï¼Œä¼šæ˜¾ç¤ºåœ¨çº¿äººæ•°ä¸Žåœ¨çº¿çŠ¶æ€ã€‚",
        "status-online": "çŠ¶æ€:",
        "status-players": "åœ¨çº¿:",
        "status-latency": "å»¶è¿Ÿ:",
        "online-players": "åœ¨çº¿æˆå‘˜",
        "about-title": "å…³äºŽé¾™æµ· Minecraft æœåŠ¡å™¨",
        "about-subtitle": "åœ¨æ–¹å—ä¸–ç•Œä¸­è¿½æ±‚çŽ°ä»£ä¸”å‹å¥½åŸŽå¸‚ä½“éªŒðŸ‘¬ :)",
        "about-desc": "é¾™æµ· Minecraft æœåŠ¡å™¨æ˜¯ä¸€ä¸ªåŸºäºŽ Forge (Arclight) æ¨¡ç»„çš„åŸŽå¸‚å»ºè®¾æœã€‚ç›®å‰é¡¹ç›®æ­£å¤„äºŽå»ºè®¾ä¸­ï¼Œæˆ‘ä»¬çš„æ„¿æ™¯æ˜¯åœ¨æ¸¸æˆä¸­åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„è™šæž„åŸŽå¸‚ä¸Žå›½å®¶ã€‚å¦‚æžœä½ çƒ­çˆ±éƒ½å¸‚å»ºç­‘/è½¨é“äº¤é€š/é£žè¡Œï¼Œæ¬¢è¿Žä½ æ¥é¾™æµ·Minecraftã€‚",
        "feature-creative": "è‡ªç”±åˆ›ä½œ",
        "feature-creative-desc": "åœ¨æˆ‘ä»¬çš„ç®¡ç†å‘˜å®¡æ‰¹ä»¥åŽï¼Œæ‚¨å¯ä»¥è‡ªç”±çš„å‘æŒ¥æ‚¨çš„å»ºç­‘æ‰åŽï¼Œåœ¨è¿™é‡Œæ²¡æœ‰å»ºç­‘çš„ä¸Šé™ï¼Œåªæœ‰æƒ³è±¡åŠ›çš„è¾¹ç•Œï¼",
        "feature-community": "æ´»è·ƒç¤¾åŒº",
        "feature-community-desc": "æˆ‘ä»¬ç›®å‰çš„å›¢é˜Ÿä¹Ÿæ˜¯ä¸€ç¾¤çƒ­çˆ±å»ºç­‘ä¸Žè½¨é“äº¤é€šçš„çŽ©å®¶æ‰€ç»„æˆï¼Œå¸Œæœ›èƒ½æ‚¨èƒ½åŠ å…¥æˆ‘ä»¬ï¼Œä¸€èµ·æ‰“é€ ä¸€ä¸ªæ¸©é¦¨ä¸”å……æ»¡åˆ›é€ åŠ›çš„åŸŽå¸‚ï¼",
        "feature-events": "ç²¾å½©æ´»åŠ¨",
        "feature-events-desc": "æˆ‘ä»¬ä¼šæ ¹æ®æŠ•ç¥¨åŠæœåŠ¡å™¨åœ¨çº¿äººæ•°å®šæœŸä¸¾åŠžå»ºç­‘å¤§èµ›/è½¨é“äº¤é€šå¤§èµ›åŠå„ç±»ç¤¾åŒºäº’åŠ¨æ´»åŠ¨ã€‚",
        "roadmap-title": "å¼€å‘è¿›åº¦è¡¨",
        "roadmap-1-title": "åˆæ­¥æž„æ€",
        "roadmap-1-desc": "2025å¹´1æœˆ8æ—¥ - æœåŠ¡å™¨çš„åˆæ­¥æž„æ€",
        "roadmap-2-title": "æœåŠ¡å™¨å¯åŠ¨",
        "roadmap-2-desc": "2025å¹´1æœˆ10æ—¥ - æœåŠ¡å™¨åˆ›å»ºå¹¶å¯åŠ¨ï¼Œç‰ˆæœ¬Forge 1.19.4ï¼Œåä¸ºAetheriaã€‚å¼€å§‹å»ºé€ åœ°é“1å·çº¿ã€‚",
        "roadmap-3-title": "æ¨¡ç»„ä¸Žæœºåœºçº¿",
        "roadmap-3-desc": "2025å¹´1æœˆ12æ—¥ - æ·»åŠ å»ºç­‘/äº¤é€šæ¨¡ç»„ï¼Œå¼€å§‹å»ºé€ æœºåœºå¿«çº¿ã€‚",
        "roadmap-4-title": "Arclight è¿ç§»",
        "roadmap-4-desc": "2025å¹´1æœˆ13æ—¥ - è½¬ä¸ºArclightç«¯ï¼Œå¢žåŠ æ’ä»¶ä¼˜åŒ–ä½“éªŒï¼Œæ·»åŠ äº†è®¸å¤šåœ°é“ç«™ã€‚",
        "roadmap-5-title": "åœ°é“2å·çº¿",
        "roadmap-5-desc": "2025å¹´1æœˆ17æ—¥ - æ¸¸æˆå†…åœ°é“2å·çº¿å¼€å§‹å»ºé€ ã€‚",
        "roadmap-6-title": "æ›´åé¾™æµ·MC",
        "roadmap-6-desc": "2025å¹´1æœˆ22æ—¥ - æœåŠ¡å™¨æ›´åä¸ºé¾™æµ·MC (DragonSea MC)ã€‚",
        "team-title": "ç®¡ç†å›¢é˜Ÿ",
        "team-1-desc": "æœåŠ¡å™¨è…ç«¹ & å¼€å‘è€…",
        "team-2-desc": "ç®¡ç†å‘˜ & å‰ç½®æœåŠ¡å™¨æä¾›è€…",
        "team-3-name": "ç¤¾åŒºç»ç†",
        "team-3-desc": "æ´»åŠ¨ç­–åˆ’",
        "footer": "Â© 2026 LeoD.Aviation ç‰ˆæƒæ‰€æœ‰ Â· ä¸ºç¤¾åŒºè€Œå»ºã€‚"
    }
};

// Detect language
let currentLang = localStorage.getItem('language') || (navigator.language.startsWith('zh') ? 'zh' : 'en');

// Set language function
function setLanguage(lang) {
    currentLang = lang;
    document.documentElement.lang = lang;
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            el.textContent = translations[lang][key];
        }
    });
    // Update title
    document.title = translations[lang]["page-title"];
    // Update button
    const langBtn = document.getElementById('lang-btn');
    if (langBtn) {
        langBtn.textContent = lang === 'en' ? 'EN' : 'ä¸­æ–‡';
    }
    // Save to localStorage
    localStorage.setItem('language', lang);
}

// Copy server address to clipboard
function copyServerAddress() {
    const address = 'mc.shutterwingphotos.cn';
    navigator.clipboard.writeText(address).then(() => {
        const copyLink = document.querySelector('.copy-link');
        if (copyLink) {
            const originalText = copyLink.textContent;
            copyLink.textContent = currentLang === 'zh' ? 'å·²å¤åˆ¶ï¼' : 'Copied!';
            setTimeout(() => {
                copyLink.textContent = originalText;
            }, 2000);
        }
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}

// Keyboard shortcuts for language switching
document.addEventListener('keydown', function(e) {
    if (e.key === 'e' || e.key === 'E') {
        setLanguage('en');
    } else if (e.key === 'c' || e.key === 'C') {
        setLanguage('zh');
    }
});

// DOM ready
document.addEventListener('DOMContentLoaded', function() {
    // Set initial language
    setLanguage(currentLang);

    // Language switcher button
    const langBtn = document.getElementById('lang-btn');
    if (langBtn) {
        langBtn.addEventListener('click', function() {
            const newLang = currentLang === 'en' ? 'zh' : 'en';
            setLanguage(newLang);
        });
    }

    // Add subtle parallax effect to header
    window.addEventListener('scroll', function() {
        const scrolled = window.pageYOffset;
        const header = document.querySelector('header');
        if (header) {
            header.style.transform = `translateY(${scrolled * 0.5}px)`;
        }
    });

    // Mock server status update (only on index page)
    if (document.getElementById('server-status')) {
        updateServerStatus();
    }

    // Console log for fun
    console.log('Welcome to DragonSea MC! ðŸš€ Press E for English, C for Chinese.');
});

// Mock server status update
function updateServerStatus() {
    const statusEl = document.getElementById('server-status');
    const playersEl = document.getElementById('player-count');
    const latencyEl = document.getElementById('latency');
    const onlineUsersEl = document.getElementById('online-users');
    const userListEl = document.getElementById('user-list');
    
    // Fetch from API
    fetch('https://shutterwingphotos.cn/api/mcstatus')
        .then(response => response.json())
        .then(data => {
            statusEl.textContent = data.online ? 'Online' : 'Offline';
            statusEl.className = data.online ? 'status-online' : 'status-offline';
            playersEl.textContent = `${data.user_count}/128`;
            const latency = Number(data.latency);
            latencyEl.textContent = `${latency}ms`;
            
            // Set latency color based on value
            if (latency < 110) {
                latencyEl.className = 'latency-green';
            } else if (latency < 250) {
                latencyEl.className = 'latency-yellow';
            } else {
                latencyEl.className = 'latency-red';
            }            
            // Show online users if there are any
            if (data.users && data.users.length > 0) {
                onlineUsersEl.style.display = 'block';
                userListEl.innerHTML = data.users.map(user => 
                    `<span class="user-tag">${user}</span>`
                ).join('');
            } else {
                onlineUsersEl.style.display = 'none';
            }
        })
        .catch(error => {
            console.error('Error fetching server status:', error);
            statusEl.textContent = 'Error';
            statusEl.className = 'status-offline';
            playersEl.textContent = '--/100';
            latencyEl.textContent = '--';
            onlineUsersEl.style.display = 'none';
        });
}